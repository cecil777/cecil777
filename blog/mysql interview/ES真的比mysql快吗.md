# ES真的比mysql快吗

## ES的底层实现

ES索引主要有正排索引和倒排索引

1. 正排索引：通过文档ID去查找整个文档内容。适用于全部文档遍历或根据某个文档ID查找内容的场景。
2. 倒排索引：通过文档中的关键词去查找文档ID列表。

ES查询先通过倒排索引，通过首字母查到对应单词，再通过单词查到文档id，最后通过正排索引通过id查对应文档。

## mysql 的底层实现

mysql 的InnoDB也有使用倒排索引

mysql查询先通过name索引树查询表的行数据，再通过表记录索引树查询整行数据。

但是ES在全文检索的性能上还是优于mysql innodb的

## 使用场景

在一个多查询条件的涉及很多字段多个表千万量级数据记录的情况下，mysql 的索引要遵循最左前缀原则，mysql很难完全覆盖到。而ES的实现机制是结果合并策略，ES支持SkipList和Bitset两种方式进行数据结果合并，这两种方式都可以轻松解决当前情况。
